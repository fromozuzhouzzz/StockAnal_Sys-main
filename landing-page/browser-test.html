<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯• - æ™ºèƒ½è‚¡ç¥¨åˆ†æç³»ç»Ÿ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1976d2;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #333;
            margin-top: 0;
        }
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .test-item:last-child {
            border-bottom: none;
        }
        .status {
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.pass {
            background: #4caf50;
            color: white;
        }
        .status.fail {
            background: #f44336;
            color: white;
        }
        .status.unknown {
            background: #ff9800;
            color: white;
        }
        .browser-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .feature-test {
            margin: 10px 0;
            padding: 15px;
            background: #fafafa;
            border-radius: 6px;
        }
        .demo-area {
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            color: white;
            border-radius: 12px;
            text-align: center;
        }
        .responsive-test {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .responsive-item {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        @media (max-width: 768px) {
            .responsive-item {
                background: #e8f5e8;
            }
        }
        @media (max-width: 480px) {
            .responsive-item {
                background: #fff3e0;
            }
        }
        .animation-test {
            width: 50px;
            height: 50px;
            background: #1976d2;
            border-radius: 50%;
            margin: 20px auto;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .theme-test {
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: var(--bg-color, #ffffff);
            color: var(--text-color, #333333);
        }
        [data-theme="dark"] .theme-test {
            --bg-color: #333333;
            --text-color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•</h1>
        
        <div class="browser-info">
            <h3>å½“å‰æµè§ˆå™¨ä¿¡æ¯</h3>
            <div id="browser-info">
                <p><strong>ç”¨æˆ·ä»£ç†:</strong> <span id="user-agent"></span></p>
                <p><strong>è§†å£å°ºå¯¸:</strong> <span id="viewport-size"></span></p>
                <p><strong>å±å¹•åˆ†è¾¨ç‡:</strong> <span id="screen-resolution"></span></p>
                <p><strong>è®¾å¤‡åƒç´ æ¯”:</strong> <span id="device-pixel-ratio"></span></p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•</h2>
            
            <div class="test-item">
                <span>CSS Grid æ”¯æŒ</span>
                <span class="status" id="css-grid-status">æ£€æµ‹ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span>CSS Flexbox æ”¯æŒ</span>
                <span class="status" id="flexbox-status">æ£€æµ‹ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span>CSS Variables æ”¯æŒ</span>
                <span class="status" id="css-variables-status">æ£€æµ‹ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span>ES6 æ”¯æŒ</span>
                <span class="status" id="es6-status">æ£€æµ‹ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span>Intersection Observer æ”¯æŒ</span>
                <span class="status" id="intersection-observer-status">æ£€æµ‹ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span>Local Storage æ”¯æŒ</span>
                <span class="status" id="local-storage-status">æ£€æµ‹ä¸­...</span>
            </div>
            
            <div class="test-item">
                <span>WebP å›¾ç‰‡æ”¯æŒ</span>
                <span class="status" id="webp-status">æ£€æµ‹ä¸­...</span>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“± å“åº”å¼è®¾è®¡æµ‹è¯•</h2>
            <p>è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æŸ¥çœ‹å“åº”å¼æ•ˆæœï¼š</p>
            
            <div class="responsive-test">
                <div class="responsive-item">
                    <h4>æ¡Œé¢ç‰ˆ</h4>
                    <p>å¤§äº 768px</p>
                </div>
                <div class="responsive-item">
                    <h4>å¹³æ¿ç‰ˆ</h4>
                    <p>768px ä»¥ä¸‹</p>
                </div>
                <div class="responsive-item">
                    <h4>æ‰‹æœºç‰ˆ</h4>
                    <p>480px ä»¥ä¸‹</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ¨ è§†è§‰æ•ˆæœæµ‹è¯•</h2>
            
            <div class="demo-area">
                <h3>æ¸å˜èƒŒæ™¯æµ‹è¯•</h3>
                <p>å¦‚æœæ‚¨çœ‹åˆ°è“è‰²æ¸å˜èƒŒæ™¯ï¼Œè¯´æ˜ CSS æ¸å˜åŠŸèƒ½æ­£å¸¸</p>
            </div>
            
            <div class="feature-test">
                <h4>CSS åŠ¨ç”»æµ‹è¯•</h4>
                <p>ä¸‹é¢çš„åœ†åœˆåº”è¯¥ä¸Šä¸‹å¼¹è·³ï¼š</p>
                <div class="animation-test"></div>
            </div>
            
            <div class="feature-test">
                <h4>ä¸»é¢˜åˆ‡æ¢æµ‹è¯•</h4>
                <div class="theme-test" id="theme-test">
                    <p>è¿™æ˜¯ä¸»é¢˜æµ‹è¯•åŒºåŸŸ</p>
                    <button onclick="toggleTheme()">åˆ‡æ¢ä¸»é¢˜</button>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>âš¡ æ€§èƒ½æµ‹è¯•</h2>
            <div id="performance-results">
                <div class="test-item">
                    <span>é¡µé¢åŠ è½½æ—¶é—´</span>
                    <span id="load-time">è®¡ç®—ä¸­...</span>
                </div>
                <div class="test-item">
                    <span>DOM å†…å®¹åŠ è½½æ—¶é—´</span>
                    <span id="dom-load-time">è®¡ç®—ä¸­...</span>
                </div>
                <div class="test-item">
                    <span>é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP)</span>
                    <span id="fcp-time">æ£€æµ‹ä¸­...</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ æµ‹è¯•ç»“æœæ±‡æ€»</h2>
            <div id="test-summary">
                <p>æ­£åœ¨è¿è¡Œæµ‹è¯•...</p>
            </div>
        </div>
    </div>

    <script>
        // æµè§ˆå™¨ä¿¡æ¯æ£€æµ‹
        function detectBrowserInfo() {
            document.getElementById('user-agent').textContent = navigator.userAgent;
            document.getElementById('viewport-size').textContent = 
                `${window.innerWidth} x ${window.innerHeight}`;
            document.getElementById('screen-resolution').textContent = 
                `${screen.width} x ${screen.height}`;
            document.getElementById('device-pixel-ratio').textContent = 
                window.devicePixelRatio || 1;
        }

        // åŠŸèƒ½æ”¯æŒæ£€æµ‹
        function detectFeatureSupport() {
            const tests = {
                'css-grid': () => CSS.supports('display', 'grid'),
                'flexbox': () => CSS.supports('display', 'flex'),
                'css-variables': () => CSS.supports('color', 'var(--test)'),
                'es6': () => {
                    try {
                        eval('const test = () => {}');
                        return true;
                    } catch (e) {
                        return false;
                    }
                },
                'intersection-observer': () => 'IntersectionObserver' in window,
                'local-storage': () => {
                    try {
                        localStorage.setItem('test', 'test');
                        localStorage.removeItem('test');
                        return true;
                    } catch (e) {
                        return false;
                    }
                },
                'webp': () => {
                    return new Promise((resolve) => {
                        const webP = new Image();
                        webP.onload = webP.onerror = () => {
                            resolve(webP.height === 2);
                        };
                        webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
                    });
                }
            };

            Object.entries(tests).forEach(async ([testName, testFn]) => {
                const statusElement = document.getElementById(`${testName}-status`);
                try {
                    const result = await testFn();
                    statusElement.textContent = result ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ';
                    statusElement.className = `status ${result ? 'pass' : 'fail'}`;
                } catch (error) {
                    statusElement.textContent = 'æ£€æµ‹å¤±è´¥';
                    statusElement.className = 'status unknown';
                }
            });
        }

        // æ€§èƒ½æ£€æµ‹
        function detectPerformance() {
            // é¡µé¢åŠ è½½æ—¶é—´
            window.addEventListener('load', () => {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                document.getElementById('load-time').textContent = `${loadTime}ms`;
                
                const domLoadTime = performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart;
                document.getElementById('dom-load-time').textContent = `${domLoadTime}ms`;
            });

            // FCP æ£€æµ‹
            if ('PerformanceObserver' in window) {
                const observer = new PerformanceObserver((list) => {
                    const entries = list.getEntries();
                    const fcp = entries.find(entry => entry.name === 'first-contentful-paint');
                    if (fcp) {
                        document.getElementById('fcp-time').textContent = `${Math.round(fcp.startTime)}ms`;
                    }
                });
                observer.observe({ entryTypes: ['paint'] });
            } else {
                document.getElementById('fcp-time').textContent = 'ä¸æ”¯æŒ';
            }
        }

        // ä¸»é¢˜åˆ‡æ¢æµ‹è¯•
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
        }

        // ç”Ÿæˆæµ‹è¯•æ±‡æ€»
        function generateTestSummary() {
            setTimeout(() => {
                const statusElements = document.querySelectorAll('.status');
                let passCount = 0;
                let totalCount = 0;

                statusElements.forEach(element => {
                    if (element.textContent !== 'æ£€æµ‹ä¸­...') {
                        totalCount++;
                        if (element.classList.contains('pass')) {
                            passCount++;
                        }
                    }
                });

                const passRate = totalCount > 0 ? Math.round((passCount / totalCount) * 100) : 0;
                const summaryElement = document.getElementById('test-summary');
                
                let summaryHTML = `
                    <h4>å…¼å®¹æ€§è¯„åˆ†: ${passRate}%</h4>
                    <p>é€šè¿‡æµ‹è¯•: ${passCount}/${totalCount}</p>
                `;

                if (passRate >= 90) {
                    summaryHTML += '<p style="color: #4caf50;">âœ… æµè§ˆå™¨å…¼å®¹æ€§ä¼˜ç§€ï¼</p>';
                } else if (passRate >= 70) {
                    summaryHTML += '<p style="color: #ff9800;">âš ï¸ æµè§ˆå™¨å…¼å®¹æ€§è‰¯å¥½ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™ã€‚</p>';
                } else {
                    summaryHTML += '<p style="color: #f44336;">âŒ æµè§ˆå™¨å…¼å®¹æ€§è¾ƒå·®ï¼Œå»ºè®®å‡çº§æµè§ˆå™¨ã€‚</p>';
                }

                summaryHTML += `
                    <h4>å»ºè®®çš„æµè§ˆå™¨ç‰ˆæœ¬:</h4>
                    <ul>
                        <li>Chrome 80+</li>
                        <li>Firefox 75+</li>
                        <li>Safari 13+</li>
                        <li>Edge 80+</li>
                    </ul>
                `;

                summaryElement.innerHTML = summaryHTML;
            }, 3000);
        }

        // åˆå§‹åŒ–æµ‹è¯•
        function initTests() {
            detectBrowserInfo();
            detectFeatureSupport();
            detectPerformance();
            generateTestSummary();
        }

        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæµ‹è¯•
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initTests);
        } else {
            initTests();
        }
    </script>
</body>
</html>
