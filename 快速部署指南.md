# ğŸš€ GitHub Actions è‡ªåŠ¨éƒ¨ç½²åˆ° Hugging Face Spaces - å¿«é€ŸæŒ‡å—

## ğŸ“‹ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### æ­¥éª¤ 1ï¼šåˆ›å»º Hugging Face Spaceï¼ˆ2åˆ†é’Ÿï¼‰

1. è®¿é—® [https://huggingface.co](https://huggingface.co) å¹¶ç™»å½•
2. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ "New Space"
3. å¡«å†™ä¿¡æ¯ï¼š
   - **Space name**: `stock-analysis-system`
   - **SDK**: é€‰æ‹© `Gradio`
   - **Hardware**: `CPU basic`ï¼ˆå…è´¹ï¼‰
   - **Visibility**: `Public`
4. ç‚¹å‡» "Create Space"

### æ­¥éª¤ 2ï¼šè·å–è®¿é—®ä»¤ç‰Œï¼ˆ1åˆ†é’Ÿï¼‰

1. ç‚¹å‡»å¤´åƒ â†’ "Settings" â†’ "Access Tokens"
2. ç‚¹å‡» "New token"
3. è®¾ç½®ï¼š
   - **Name**: `github-actions-deploy`
   - **Type**: `Write`
4. ç‚¹å‡» "Generate a token"
5. **ç«‹å³å¤åˆ¶å¹¶ä¿å­˜ä»¤ç‰Œ**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

### æ­¥éª¤ 3ï¼šé…ç½® GitHub Secretsï¼ˆ1åˆ†é’Ÿï¼‰

1. æ‰“å¼€æ‚¨çš„ GitHub ä»“åº“
2. è¿›å…¥ "Settings" â†’ "Secrets and variables" â†’ "Actions"
3. ç‚¹å‡» "New repository secret" æ·»åŠ ï¼š

   **HF_TOKEN**
   ```
   Name: HF_TOKEN
   Secret: ç²˜è´´æ‚¨çš„ Hugging Face ä»¤ç‰Œ
   ```

   **HF_SPACE**
   ```
   Name: HF_SPACE
   Secret: æ‚¨çš„ç”¨æˆ·å/spaceåç§°ï¼ˆä¾‹å¦‚ï¼šjohndoe/stock-analysis-systemï¼‰
   ```

### æ­¥éª¤ 4ï¼šæ·»åŠ å·¥ä½œæµæ–‡ä»¶ï¼ˆ1åˆ†é’Ÿï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.github/workflows/deploy.yml` æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š

```yaml
name: Deploy to Hugging Face Spaces

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

env:
  HF_HUB_ENABLE_HF_TRANSFER: 1

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
        lfs: true

    - name: è®¾ç½® Python ç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        cache: 'pip'

    - name: å®‰è£…ä¾èµ–
      run: |
        python -m pip install --upgrade pip
        pip install huggingface_hub

    - name: éªŒè¯éƒ¨ç½²æ–‡ä»¶
      run: |
        echo "ğŸ” æ£€æŸ¥å¿…éœ€æ–‡ä»¶..."
        if [ ! -f "app.py" ]; then
          echo "âŒ é”™è¯¯: app.py æ–‡ä»¶ä¸å­˜åœ¨"
          exit 1
        fi
        if [ ! -f "requirements.txt" ]; then
          echo "âŒ é”™è¯¯: requirements.txt æ–‡ä»¶ä¸å­˜åœ¨"
          exit 1
        fi
        echo "âœ… æ–‡ä»¶éªŒè¯å®Œæˆ"

    - name: éƒ¨ç½²åˆ° Hugging Face Spaces
      env:
        HF_TOKEN: ${{ secrets.HF_TOKEN }}
        HF_SPACE: ${{ secrets.HF_SPACE }}
      run: |
        echo "ğŸš€ å¼€å§‹éƒ¨ç½²åˆ° Hugging Face Spaces..."
        
        python -c "
import os
from huggingface_hub import HfApi, upload_folder
import sys

try:
    api = HfApi(token=os.environ['HF_TOKEN'])
    space_id = os.environ['HF_SPACE']
    
    print(f'ğŸ“¤ ä¸Šä¼ åˆ° Space: {space_id}')
    
    ignore_patterns = [
        '.git*', '__pycache__', '*.pyc', '.env.example',
        'logs/', 'data/news/', '.pytest_cache', 'tests/',
        'docs/', 'images/', '*.log', 'fly.toml', 'render.yaml'
    ]
    
    upload_folder(
        folder_path='.',
        repo_id=space_id,
        repo_type='space',
        token=os.environ['HF_TOKEN'],
        ignore_patterns=ignore_patterns,
        commit_message=f'Auto-deploy from GitHub Actions'
    )
    
    print('âœ… éƒ¨ç½²å®Œæˆ!')
    print(f'ğŸŒ è®¿é—®åœ°å€: https://huggingface.co/spaces/{space_id}')
    
except Exception as e:
    print(f'âŒ éƒ¨ç½²å¤±è´¥: {e}')
    sys.exit(1)
        "

    - name: éƒ¨ç½²æˆåŠŸ
      if: success()
      run: |
        echo "ğŸ‰ éƒ¨ç½²æˆåŠŸå®Œæˆ!"
        echo "ğŸŒ æ‚¨çš„åº”ç”¨åœ°å€: https://huggingface.co/spaces/${{ secrets.HF_SPACE }}"
        echo "â° è¯·ç­‰å¾… 2-5 åˆ†é’Ÿè®©åº”ç”¨å®Œæˆæ„å»º"
```

### æ­¥éª¤ 5ï¼šè§¦å‘éƒ¨ç½²ï¼ˆç«‹å³ï¼‰

æ¨é€ä»£ç åˆ° main åˆ†æ”¯ï¼š
```bash
git add .
git commit -m "æ·»åŠ  GitHub Actions è‡ªåŠ¨éƒ¨ç½²"
git push origin main
```

æˆ–è€…æ‰‹åŠ¨è§¦å‘ï¼š
1. è¿›å…¥ GitHub ä»“åº“ â†’ "Actions"
2. é€‰æ‹© "Deploy to Hugging Face Spaces"
3. ç‚¹å‡» "Run workflow"

---

## âœ… æ£€æŸ¥éƒ¨ç½²çŠ¶æ€

### GitHub Actions
- è¿›å…¥ä»“åº“ â†’ "Actions" â†’ æŸ¥çœ‹å·¥ä½œæµçŠ¶æ€
- ç»¿è‰²å‹¾å· = æˆåŠŸï¼Œçº¢è‰²å‰å· = å¤±è´¥

### Hugging Face Spaces
- è®¿é—® `https://huggingface.co/spaces/æ‚¨çš„ç”¨æˆ·å/spaceåç§°`
- æŸ¥çœ‹æ„å»ºçŠ¶æ€å’Œæ—¥å¿—

---

## ğŸ”§ å¯é€‰é…ç½®

### æ·»åŠ  API å¯†é’¥ï¼ˆå¦‚æœéœ€è¦ AI åŠŸèƒ½ï¼‰

åœ¨ GitHub Secrets ä¸­æ·»åŠ ï¼š
```
OPENAI_API_KEY = æ‚¨çš„OpenAIå¯†é’¥
OPENAI_API_URL = https://api.openai.com/v1
OPENAI_API_MODEL = gpt-4o
```

ç„¶ååœ¨ Hugging Face Space è®¾ç½®ä¸­ä¹Ÿæ·»åŠ ç›¸åŒçš„ç¯å¢ƒå˜é‡ã€‚

### è‡ªå®šä¹‰ README

åˆ›å»º `README_HF.md` æ–‡ä»¶ï¼š
```markdown
---
title: æ™ºèƒ½åˆ†æç³»ç»Ÿï¼ˆè‚¡ç¥¨ï¼‰
emoji: ğŸ“ˆ
colorFrom: blue
colorTo: green
sdk: gradio
sdk_version: 4.44.0
app_file: app.py
pinned: false
license: mit
---

# æ™ºèƒ½åˆ†æç³»ç»Ÿï¼ˆè‚¡ç¥¨ï¼‰

åŸºäº Python å’Œ Flask çš„æ™ºèƒ½è‚¡ç¥¨åˆ†æç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹ç‚¹
- å¤šç»´åº¦è‚¡ç¥¨åˆ†æ
- AI å¢å¼ºåˆ†æ
- å®æ—¶æ•°æ®è·å–
- å¯è§†åŒ–å›¾è¡¨

## å…è´£å£°æ˜
ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

**Q: éƒ¨ç½²å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥ GitHub Actions æ—¥å¿—ï¼Œç¡®è®¤ Secrets è®¾ç½®æ­£ç¡®ã€‚

**Q: Space ä¸€ç›´æ˜¾ç¤º Buildingï¼Ÿ**
A: æŸ¥çœ‹ Hugging Face Space çš„ Logs é€‰é¡¹å¡ï¼Œæ£€æŸ¥æ„å»ºé”™è¯¯ã€‚

**Q: å¦‚ä½•æ›´æ–°åº”ç”¨ï¼Ÿ**
A: æ¨é€æ–°ä»£ç åˆ° main åˆ†æ”¯å³å¯è‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

---

## ğŸ“ è·å–å¸®åŠ©

- è¯¦ç»†æ•™ç¨‹ï¼šæŸ¥çœ‹ `GitHub_Actions_HF_éƒ¨ç½²æ•™ç¨‹.md`
- GitHub Issuesï¼šåœ¨é¡¹ç›®ä»“åº“åˆ›å»ºé—®é¢˜
- ç¤¾åŒºæ”¯æŒï¼š[Hugging Face è®ºå›](https://discuss.huggingface.co/)

---

**ğŸ‰ å®Œæˆï¼æ‚¨çš„è‚¡ç¥¨åˆ†æç³»ç»Ÿç°åœ¨ä¼šè‡ªåŠ¨éƒ¨ç½²åˆ° Hugging Face Spacesï¼**
